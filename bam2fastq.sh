#!/usr/bin/env bash
set -euo pipefail

# ============================================================
# BAM â†’ FASTQ conversion
# ============================================================

# ------------------------------------------------------------
# Tool path (edit as needed)
# ------------------------------------------------------------
SAMTOOLS_BIN="/path/to/samtools"

# ------------------------------------------------------------
# Input / output
# ------------------------------------------------------------
INPUT_BAM="/path/to/input.bam"
OUTPUT_FASTQ="/path/to/output.fastq"

# ------------------------------------------------------------
# Parameters
# ------------------------------------------------------------
THREADS=20

# ------------------------------------------------------------
# Prepare output directory
# ------------------------------------------------------------
mkdir -p "$(dirname "$OUTPUT_FASTQ")"

# ------------------------------------------------------------
# Run
# ------------------------------------------------------------
"$SAMTOOLS_BIN" fastq -@ "$THREADS" "$INPUT_BAM" > "$OUTPUT_FASTQ"
