#!/usr/bin/env bash
set -euo pipefail

# ============================================================
# Read filtering with chopper
# ============================================================

# ------------------------------------------------------------
# Tool path (edit as needed)
# ------------------------------------------------------------
CHOPPER_BIN="/path/to/chopper"

# ------------------------------------------------------------
# Input / output (edit as needed)
# ------------------------------------------------------------
INPUT_FASTQ="/path/to/input.fastq"
OUTPUT_FASTQ="/path/to/output.fastq"

# ------------------------------------------------------------
# Filtering parameters
# ------------------------------------------------------------
MIN_Q=9
MIN_LEN=200

# ------------------------------------------------------------
# Prepare output directory
# ------------------------------------------------------------
mkdir -p "$(dirname "$OUTPUT_FASTQ")"

# ------------------------------------------------------------
# Run
# ------------------------------------------------------------
"$CHOPPER_BIN" -q "$MIN_Q" -l "$MIN_LEN" -i "$INPUT_FASTQ" > "$OUTPUT_FASTQ"
