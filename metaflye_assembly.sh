#!/usr/bin/env bash
set -euo pipefail

# ============================================================
# metaFlye assembly
# ============================================================

# ------------------------------------------------------------
# Tool path (edit as needed)
# ------------------------------------------------------------
FLYE_BIN="/path/to/flye"

# ------------------------------------------------------------
# Input / output
# ------------------------------------------------------------
INPUT_FASTQ="/path/to/input.fastq.gz"
OUT_DIR="/path/to/metaflye_assembly"

# ------------------------------------------------------------
# Parameters
# ------------------------------------------------------------
THREADS=20
META_MODE=1   # 1 = --meta, 0 = off

# ------------------------------------------------------------
# Prepare output directory
# ------------------------------------------------------------
mkdir -p "$OUT_DIR"

# ------------------------------------------------------------
# Build command
# ------------------------------------------------------------
CMD=(
  "$FLYE_BIN"
  --nano-hq "$INPUT_FASTQ"
  -o "$OUT_DIR"
  --threads "$THREADS"
)

[[ "$META_MODE" == "1" ]] && CMD+=(--meta)

# ------------------------------------------------------------
# Run
# ------------------------------------------------------------
"${CMD[@]}"
