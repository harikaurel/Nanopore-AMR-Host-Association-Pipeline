#!/usr/bin/env bash
set -euo pipefail

# ============================================================
# nanoMDBG assembly
# ============================================================

# ------------------------------------------------------------
# Tool path (edit as needed)
# ------------------------------------------------------------
NANOMDBG_BIN="/path/to/metaMDBG"

# ------------------------------------------------------------
# Input / output
# ------------------------------------------------------------
INPUT_FASTQ="/path/to/chopper_filtered.fastq"
OUT_DIR="/path/to/nanomdbg_assembly"

# ------------------------------------------------------------
# Parameters
# ------------------------------------------------------------
THREADS=20

# ------------------------------------------------------------
# Prepare output directory
# ------------------------------------------------------------
mkdir -p "$OUT_DIR"

# ------------------------------------------------------------
# Run
# ------------------------------------------------------------
"$NANOMDBG_BIN" asm \
  --out-dir "$OUT_DIR" \
  --in-ont "$INPUT_FASTQ" \
  --threads "$THREADS"
